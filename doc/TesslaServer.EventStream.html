    <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.11.5">
    <title>TesslaServer.EventStream – tessla_server v0.0.1</title>
    <link rel="stylesheet" href="dist/app-ddd9717ad9.css" />
    
    <script src="dist/sidebar_items.js"></script>
  </head>
  <body data-type="modules">

    <div class="main">
<button class="sidebar-toggle">
  <i class="icon-menu"></i>
</button>
<section class="sidebar">
  <button class="sidebar-toggle">
    <i class="icon-menu"></i>
  </button>

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        tessla_server
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.0.1
      </h2>
    </div>
    
  </a>

  <div class="sidebar-search">
    <i class="icon-search"></i>
    <input type="text" class="sidebar-searchInput" placeholder="search" autocomplete="off" />
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>

  <ul id="full-list" class="sidebar-fullList"></ul>
  <div class="sidebar-noResults"></div>
</section>

<section class="content">
  <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">tessla_server v0.0.1</small>
        TesslaServer.EventStream
        
        
      </h1>

      
        <section id="moduledoc" class="docstring">
          <p>Represents a Stream, generated either from external Events or by computation through
a <code class="inline">Node</code>
Note that <code class="inline">progressed_to</code> can be bigger than the <code class="inline">timestamp</code> of the latest <code class="inline">Event</code>:
If all Inputs of the <code class="inline">Node</code> generating this <code class="inline">Stream</code> have advanced to at least <code class="inline">t</code> but
no new Event is generated (e.g. because the <code class="inline">Node</code> is a delay with a higher value)
the <code class="inline">Stream</code> will be progressed to <code class="inline">t</code> but no Event with a timestamp <code class="inline">t</code> is present.
<code class="inline">progressed_to</code> can also be smaller than <code class="inline">timestamp</code> of the latest function, when the
events are generated by changing their timestamps (e.g. see <code class="inline">TesslaServer.Node.Timing.Delay</code>).</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <i class="icon-link"></i>
            </a>
            Summary
          </h1>
          
  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#t:stream_type/0">stream_type()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:t/0">t()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:timestamp/0">timestamp()</a>
  </div>
  
</div>

  </div>


          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#add_event/3">add_event(event_stream, event, progress \\ true)</a>
  </div>
  
    <div class="summary-synopsis"><p>Adds the <code class="inline">Event</code> to the <code class="inline">EventStream</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#event_at/2">event_at(stream, at)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns the most recent <code class="inline">Event.t</code> that occured at or before <code class="inline">at</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#events_in_timeslot/3">events_in_timeslot(stream, from, to)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns all event on the stream with a <code class="inline">timestamp</code> bigger than <code class="inline">from</code> and smaller or equal to
<code class="inline">to</code>.
To work, the stream has to be ordered by it’s <code class="inline">timestamps</code>, which all <code class="inline">Stream.t</code> structs should
be always</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#progress/2">progress(stream, timestamp)</a>
  </div>
  
    <div class="summary-synopsis"><p>Progresses the <code class="inline">EventStream</code> to the given <code class="inline">timestamp</code></p>
</div>
  
</div>

  </div>


          

          

        </section>
      

      
        <section id="types" class="types details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <i class="icon-link"></i>
            </a>
            Types
          </h1>
          <div class="types-list">
            <div id="t:stream_type/0" class="type-detail">
  <pre><code class="elixir"><a href="#t:stream_type/0">stream_type</a> :: :events | :signal</code></pre>
  
</div>
<div id="t:t/0" class="type-detail">
  <pre><code class="elixir"><a href="#t:t/0">t</a> :: %TesslaServer.EventStream{events: [<a href="TesslaServer.Event.html#t:t/0">TesslaServer.Event.t</a>], id: integer | nil, progressed_to: <a href="#t:timestamp/0">timestamp</a> | :literal, type: <a href="#t:stream_type/0">stream_type</a>}</code></pre>
  
</div>
<div id="t:timestamp/0" class="type-detail">
  <pre><code class="elixir"><a href="#t:timestamp/0">timestamp</a> :: Timex.Types.timestamp</code></pre>
  
</div>

          </div>
        </section>
      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <i class="icon-link"></i>
            </a>
            Functions
          </h1>
          <div class="detail" id="add_event/3">
  <div class="detail-header">
    <a href="#add_event/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">add_event(event_stream, event, progress \\ true)</span>
      
  </div>
  
    <div class="specs">
      <h4 class="specs-title">Specs</h4>
      <div class="specs-list">
        
          <pre><code class="elixir">add_event(nil | EventStream.t, <a href="TesslaServer.Event.html#t:t/0">TesslaServer.Event.t</a>, boolean) ::
  {:ok, EventStream.t} |
  {:error, <a href="http://elixir-lang.org/docs/stable/elixir/String.html#t:t/0">String.t</a>}</code></pre>
        
      </div>
    </div>
  
  <section class="docstring">
    <p>Adds the <code class="inline">Event</code> to the <code class="inline">EventStream</code>.</p>
<pre><code class="iex elixir">iex&gt; event = %Event{stream_id: :test, timestamp: {1000, 123456, 123456}, value: 1}
iex&gt; stream = %EventStream{id: :test}
iex&gt; {:ok, updated_stream} = EventStream.add_event(stream, event)
iex&gt; hd(updated_stream.events)
%TesslaServer.Event{stream_id: :test, timestamp: {1000, 123456, 123456}, value: 1}</code></pre>
<p>If the stream is nil it will create a new <code class="inline">EventStream</code> with the id of the <code class="inline">event</code> and
<code class="inline">progressed_to</code> equal to the <code class="inline">timestamp</code> of the <code class="inline">event</code></p>
<pre><code class="iex elixir">iex&gt; event = %Event{stream_id: :test, timestamp: {1000, 123456, 123456}, value: 1}
iex&gt; stream = nil
iex&gt; {:ok, updated_stream} = EventStream.add_event(stream, event)
iex&gt; updated_stream
%TesslaServer.EventStream{
  events: [%TesslaServer.Event{stream_id: :test, timestamp: {1000, 123456, 123456}, value: 1}],
  id: :test,
  progressed_to: {1000, 123456, 123456}
}</code></pre>
<p>The <code class="inline">timestamp</code> of the <code class="inline">Event</code> has to be greater or equal to the <code class="inline">progressed_to</code> value
of the <code class="inline">EventStream</code>.</p>
<pre><code class="iex elixir">iex&gt; event = %Event{stream_id: :test, timestamp: {0, 1, 2}, value: 1}
iex&gt; stream = %EventStream{id: :test, progressed_to: {1, 2, 3}}
iex&gt; {:error, reason} = EventStream.add_event(stream, event)
iex&gt; reason
&quot;Event&#39;s timestamp smaller than stream progress&quot;</code></pre>
<p>The <code class="inline">stream_id</code> of the <code class="inline">Event</code> has to be the same as the <code class="inline">id</code> of the EventStream or else an
error will be returned.</p>
<pre><code class="iex elixir">iex&gt; event = %Event{stream_id: :wrong_id, timestamp: {1000, 123456, 123456}, value: 1}
iex&gt; stream = %EventStream{id: :test}
iex&gt; {:error, reason} = EventStream.add_event(stream, event)
iex&gt; reason
&quot;Event has different stream_id than stream&quot;</code></pre>
<p>This method will advance the <code class="inline">progressed_to</code> field to the <code class="inline">timestamp</code> of the <code class="inline">Event</code>.</p>

  </section>
</div>
<div class="detail" id="event_at/2">
  <div class="detail-header">
    <a href="#event_at/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">event_at(stream, at)</span>
      
  </div>
  
    <div class="specs">
      <h4 class="specs-title">Specs</h4>
      <div class="specs-list">
        
          <pre><code class="elixir">event_at(EventStream.t, <a href="#t:timestamp/0">timestamp</a>) ::
  <a href="TesslaServer.Event.html#t:t/0">TesslaServer.Event.t</a> |
  nil</code></pre>
        
      </div>
    </div>
  
  <section class="docstring">
    <p>Returns the most recent <code class="inline">Event.t</code> that occured at or before <code class="inline">at</code></p>
<h2>Examples</h2>
<pre><code class="iex elixir">iex&gt; event0 = %Event{stream_id: :test, value: 0, timestamp: {0, 0, 0}}
iex&gt; event1 = %Event{stream_id: :test, value: 1, timestamp: {1, 0, 0}}
iex&gt; event2 = %Event{stream_id: :test, value: 2, timestamp: {2, 0, 0}}
iex&gt; events = [event2, event1, event0]
iex&gt; stream = %EventStream{id: :test, progressed_to: {2, 0, 0}, events: events}
iex&gt; EventStream.event_at(stream, {1, 0, 0})
%Event{stream_id: :test, value: 1, timestamp: {1, 0, 0}}

iex&gt; event2 = %Event{stream_id: :test, value: 2, timestamp: {2, 0, 0}}
iex&gt; events = [event2]
iex&gt; stream = %EventStream{id: :test, progressed_to: {2, 0, 0}, events: events}
iex&gt; EventStream.event_at(stream, {1, 0, 0})
nil</code></pre>

  </section>
</div>
<div class="detail" id="events_in_timeslot/3">
  <div class="detail-header">
    <a href="#events_in_timeslot/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">events_in_timeslot(stream, from, to)</span>
      
  </div>
  
    <div class="specs">
      <h4 class="specs-title">Specs</h4>
      <div class="specs-list">
        
          <pre><code class="elixir">events_in_timeslot(EventStream.t | nil, <a href="#t:timestamp/0">timestamp</a>, <a href="#t:timestamp/0">timestamp</a>) :: [<a href="TesslaServer.Event.html#t:t/0">TesslaServer.Event.t</a>]</code></pre>
        
      </div>
    </div>
  
  <section class="docstring">
    <p>Returns all event on the stream with a <code class="inline">timestamp</code> bigger than <code class="inline">from</code> and smaller or equal to
<code class="inline">to</code>.
To work, the stream has to be ordered by it’s <code class="inline">timestamps</code>, which all <code class="inline">Stream.t</code> structs should
be always.</p>
<p>##Examples</p>
<pre><code class="iex elixir">iex&gt; event0 = %Event{timestamp: {0, 0, 0}, stream_id: :test, value: 0}
iex&gt; event1 = %Event{timestamp: {1, 0, 0}, stream_id: :test, value: 1}
iex&gt; event2 = %Event{timestamp: {2, 0, 0}, stream_id: :test, value: 2}
iex&gt; event3 = %Event{timestamp: {3, 0, 0}, stream_id: :test, value: 3}
iex&gt; event4 = %Event{timestamp: {4, 0, 0}, stream_id: :test, value: 4}
iex&gt; events = [event4, event3, event2, event1, event0]
iex&gt; stream = %EventStream{id: :test, progressed_to: {4, 0, 0}, events: events}
iex&gt; EventStream.events_in_timeslot(stream, {1, 0, 0}, {3,0,0})
[%Event{timestamp: {3, 0, 0}, stream_id: :test, value: 3},
%Event{timestamp: {2, 0, 0}, stream_id: :test, value: 2}]</code></pre>

  </section>
</div>
<div class="detail" id="progress/2">
  <div class="detail-header">
    <a href="#progress/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">progress(stream, timestamp)</span>
      
  </div>
  
    <div class="specs">
      <h4 class="specs-title">Specs</h4>
      <div class="specs-list">
        
          <pre><code class="elixir">progress(EventStream.t, <a href="#t:timestamp/0">timestamp</a>) ::
  {:ok, EventStream.t} |
  {:error, <a href="http://elixir-lang.org/docs/stable/elixir/String.html#t:t/0">String.t</a>}</code></pre>
        
      </div>
    </div>
  
  <section class="docstring">
    <p>Progresses the <code class="inline">EventStream</code> to the given <code class="inline">timestamp</code>.</p>
<pre><code class="iex elixir">iex&gt; timestamp = {1234, 123456, 123456}
iex&gt; stream = %EventStream{}
iex&gt; EventStream.progress(stream, timestamp)
{:ok, %EventStream{progressed_to: {1234, 123456, 123456}}}</code></pre>
<p>The <code class="inline">timestamp</code> has to be bigger or equal to the <code class="inline">stream</code>s <code class="inline">progressed_to</code>
or else an error will be returned.</p>
<pre><code class="iex elixir">iex&gt; timestamp = {1, 0, 0}
iex&gt; stream = %EventStream{progressed_to: {2, 0, 0}}
iex&gt; EventStream.progress(stream, timestamp)
{:error, &quot;Timestamp smaller than progress of EventStream&quot;}</code></pre>

  </section>
</div>

        </section>
      

      

      
        <footer class="footer">
      <p>
        <span class="line">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.11.5),
        </span>
        <span class="line">
          designed by
          <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
      </p>
      <button class="night-mode-toggle" />
    </footer>
  </div>
</section>
</div>
  <script src="dist/app-918614602f.js"></script>
  </body>
</html>

